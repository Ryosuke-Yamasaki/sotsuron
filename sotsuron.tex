\documentclass[a4paper, 12pt]{ltjsarticle}
\usepackage{thesis}

% 表紙のスタイル設定
\newcommand{\coverpage}{
\begin{titlepage}
\begin{center}
\vspace*{1.5cm}

{\LARGE 2024年度卒業論文}\\[2cm] % 年度タイトル

{\Huge {常微分方程式のシミュレータ教材の開発}}\\[4cm] % 論文タイトル　二行にしたい場合はバックスラッシュ2個つける

{\LARGE 指導教員　須田 宇宙 准教授}\\[2cm] % 指導教員名
{\LARGE 千葉工業大学 情報ネットワーク学科}\\[0.5cm] % 学科名

{\LARGE 須田研究室}\\[2.5cm] % 研究室名

{\LARGE {2032144}　氏名 {山﨑亮輔}} \\[1.5cm] % 学番と名前

\vfill
\end{center}

% 提出日を右下に配置
\begin{flushright}
{\LARGE 提出日　\textnormal{2025年1月17日}}\\[1.5cm] % 提出日
\end{flushright}

\vfill
\end{titlepage}
}

\begin{document}

% 表紙の挿入
\coverpage

\tableofcontents

\clearpage

\section{緒言}
理工学系の教育現場では，不可視現象を取り扱うことがあり，座学のみでは高い学習効果を得ることは難しい．
そのため，不可視現象を電子端末上で再現する教材であるシミュレータ教材を用いた体験的な学習が有効的である\cite{suda2018}．

シミュレーションとは，現実で実現不可能なこと，実物で試行錯誤が難しい場合や影響が大きすぎる現象を仮想的に実験することである．また，シミュレーションは幅広い分野で活用されており，私たちの生活をより豊かにする上で重要な役割を果たしている．

一方，物理現象が数学的には微分方程式の形で表現される．
しかし，微分方程式の解を全て解析的に求めることは現実的に不可能である．
これは厳密解がないということではなく，公式や定理が存在しないため，解析的に解くことができないということである．
そのため，厳密解ではないがそれに近しい解で表現する近似解法がある．
その中に，コンピュータを用いたて大規模な計算を行い解を導く数値解法があり，コンピュータの性能向上に伴い，コンピュータシミュレーションが盛んに行われるようになった．
実際のシミュレーションでは，その分野や題材ごとに必要な精度が決まっており，その条件を満たすように微小区間の幅を設定する．
しかし，教育現場では微小区間の幅が既に設定されている状態で精度を比較する問題が出されることが多い．
そのため，微小区間の幅は自らが設定するものだと理解することは難しい．
それによって，実際にシミュレーションを行う際，精度と計算コストを考慮しながら微小区間の幅を設定することができないという問題につながる．

そこで本研究では，微小区間の幅を設定する過程を体験することで，精度と計算コストへの影響についての比較が可能なシミュレータ教材の開発を目的する．
\clearpage
\section{シミュレーションについて}
\subsection{概要}
シミュレーションとは，自然現象や社会現象を方程式によって表現し，あるケースにおいての変化を計算することである．現実世界で実験を行うことが困難な現象について，コンピュータ上で仮想的な環境を構築し，条件を変更しながら実験を行うことによって，現象の本質を理解したり予測をすることができる．また，シミュレーションは幅広い分野で活用されており，私たちの生活をより豊かにする上で重要な役割を果たしている．
\subsection{流れ}
シミュレーションの流れは次のようになる．
\begin{enumerate}[label=(\roman*)]
\item モデル化\\
ある現象を法則に沿った方程式にする．
\item プログラミング\\
モデル化したものをコンピュータで計算処理するためのプログラミングを行う．
\item 計算の実行\\
プログラムを実行し，シミュレーションを行う．
\item 結果の分析\\
結果から条件を変更し再計算を行なったり，結果を分析し結論を導く．
\end{enumerate}
\subsection{誤差}
シミュレーションにおいて誤差が生じる．この誤差が生じる原因としては，以下の3つがある．
\begin{enumerate}[label=(\alph*)]
\item モデル化の際の簡略化\\
現実世界の現象の要素を全て正確にモデル化することはできないため．
\item 打ち切り誤差\\
連続的な現象を離散化することでコンピュータで計算を行っているため．
\item 丸め誤差\\
コンピュータでの小数点表現は有限桁のため表現できない数が存在するため．
\end{enumerate}
\clearpage
\section{常微分方程式について}
\subsection{概要}
未知の関数とその導関数との関係を表す方程式を微分方程式といい，1つの変数で導関数が表されている微分方程式を常微分方程式という．シミュレーションで用いられる際には時間を変数とすることが多い．
\subsection{数値解法}
常微分方程式の数値解法は初期値問題に分類され，与えられた導関数における微小区間の面積を原関数における微小区間の変化分として原関数を求められる．連続的なグラフを離散的に数値を求め，その点を結びグラフを描くため誤差が生じる．代表的な解法としてオイラー法と4次ルンゲクッタ法がある．
与えられた導関数を$\frac{dy}{dx}=f(x,y)$，初期値を$(x,y)=(x_0,y_0)$，微小区間の幅を$h$とする．
\subsection{オイラー法}
オイラー法では，現在の点における傾きから次の点を予測していく方法である．現在の点を$(x_n,y_n)$とすると，$(x_{n+1},y_{n+1})$は以下のようになる．
\begin{equation}
  x_{n+1}=x_n+h
\end{equation}
\begin{equation}
  y_{n+1}=y_n+hf(x_n,y_n)
\end{equation}
\clearpage
図\ref{fig:オイラー法}は，$x$の値が$x_n$から$x_{n+1}$を拡大したものになる．青色のラインが厳密解のグラフを表しており，赤色のラインがオイラー法によって求められた$x_n$と$x_{n+1}$における座標を直線で結んだものになっている．これを各微小区間で繰り返すことでオイラー法による原関数のグラフが描かれる．
\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=0.7\textwidth,keepaspectratio]{euler.pdf}
\end{center}
\caption{オイラー法}
\label{fig:オイラー法}
\end{figure}
\clearpage
\subsection{4次ルンゲクッタ法}
4次ルンゲクッタ法では，次の補正値$k$を用いて次の点を求める．
\begin{equation}
  k_1=hf(x_n,y_n)\label{eq:3}
\end{equation}
\begin{equation}
  k_2=hf(x_n+\frac{h}{2},y_n+\frac{k_1}{2})\label{eq:4}
\end{equation}
\begin{equation}
  k_3=hf(x_n+\frac{h}{2},y_n+\frac{k_2}{2})\label{eq:5}
\end{equation}
\begin{equation}
  k_4=hf(x_n+h,y_n+k_3)\label{eq:6}
\end{equation}
式\eqref{eq:3}では，現在の点を用いており，式\eqref{eq:4}と式\eqref{eq:5}は現在の点と次の点の中点を用いている．最後に，式\eqref{eq:6}では，次の点を用いている．現在の点を$(x_n,y_n)$とすると，$x_{n+1}$は式\eqref{eq:7}，$y_{n+1}$は式\eqref{eq:8}のようになる．
\begin{equation}
  x_{n+1}=x_n+h\label{eq:7}
\end{equation}
\begin{equation}
  y_{n+1}=y_n+\frac{1}{6}(k_1+2k_2+2k_3+k_4)\label{eq:8}
\end{equation}
\clearpage
図\ref{fig:4次ルンゲクッタ法}は，$x$の値が$x_n$から$x_{n+1}$を拡大したものになる．青色のラインが厳密解のグラフを表しており，補正値$k_1$,$k_2$,$k_3$,$k_4$についてそれぞれ赤色，黄色，緑色，ピンク色の矢印で表している．最後に，オレンジ色のラインがオイラー法によって求められた$x_n$と$x_{n+1}$における座標を直線で結んだものになっている．これは各補正値に重みを付加し，足し合わせたものになる．これらを各微小区間で繰り返すことで4次ルンゲクッタ法による原関数のグラフが描かれる．
\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{runge-kutta.pdf}
\end{center}
\caption{4次ルンゲクッタ法}
\label{fig:4次ルンゲクッタ法}
\end{figure}
\clearpage
\section{シミュレータ教材について}
理工学系の教育現場では，不可視現象を取り扱うことがある．不可視現象を取り扱う分野の学習に関して，座学のみでは高い学習効果を得ることが難しい．そのため，e-Learningコンテンツとして不可視現象をデジタル端末で可視化，可聴化する教材であるシミュレータ教材を用いた体験的な学習が有効的である．シミュレータ教材は目的に応じて次のように分類することができる．
\begin{enumerate}[label=(\alph*)]
\item 汎用測定機器教材\\
入力データを与えることで，一般の測定機器のように解析を行わせることを目的としている．
\item 時間変化を伸縮する教材\\
高速あるいは低速で時間変化する現象を伸縮して可視化することを目的としている．
\item 3D-CG表示教材\\
二次元の図では断片的に表すのみの現象を，3D-CGの技法を取り入れることで立体的に表現し，あらゆる角度から観察できる教材にすることを目的としている．
\item 可聴化教材\\
視覚では確認が難しい音響現象音響現象を，聴覚的に合成音で確認することを目的している．
\item 現象のアニメーション化\\
シミュレーション結果をもとに，直感的，現実的なアニメーション技法に基づきビットマップ対応で表現することを目的としている．
\end{enumerate}
\clearpage
\section{開発したシミュレータ教材について}
\subsection{目的}
本研究では，常微分方程式の数値解法を学ぶ際に，実際のシミュレーションにおける初期値の扱い方との乖離による疑問を解決することを目的とし，特に，微小区間の幅を自ら設定させることを理解させる教材を開発することである．
\subsection{使用方法}
シミュレータ教材の画面を図\ref{fig:シミュレータ教材の画面}に示す．①の操作部でシミュレーションをする導関数と初期値を選択し，Startボタンを押すことで，②ではオイラー法によるグラフと理論値のグラフを視覚的に確認できる．また，③では誤差が最大となる部分のグラフをより視覚的に確認できる．④では計算回数，誤差，必要な精度を満たしているのかの判定文を確認できるようにしている．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-image.pdf}
\end{center}
\caption{シミュレータ教材の画面}
\label{fig:シミュレータ教材の画面}
\end{figure}

\clearpage
\subsection{使用例}
本研究で開発したシミュレータ教材は常微分方程式の基礎的な知識を持っている前提で演習問題を解く際の補助教材として使用することを想定している．また，演習問題として，"導関数を$\sin(x)$において必要な精度が0.01未満となるには微小区間の幅をいくつに設定すれば良いか．"について解くことを想定した例を示す．図\ref{fig:シミュレータ教材を開いた際の画面}は開発した教材を開いた際の画面である．図\ref{fig:シミュレータ教材を開いた際の画面}から導関数や微小区間の幅を設定してシミュレーションをすることができる．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-sample1.png}
\end{center}
\caption{シミュレータ教材を開いた際の画面}
\label{fig:シミュレータ教材を開いた際の画面}
\end{figure}

\clearpage

まず，本教材を用いた演習の例について記述していく．導関数に$\sin(x)$，微小区間の幅を0.1，必要な精度を0.01を設定してStartボタンを押した際の画面を図\ref{fig:シミュレータ教材の使用例1}に示す．計算が完了すると結果部分，グラフ描画部分及び拡大グラフ描画部分が表示される．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-sample2.png}
\end{center}
\caption{シミュレータ教材の使用例1}
\label{fig:シミュレータ教材の使用例1}
\end{figure}

\clearpage

次に，必要な精度を満たしていないため微小区間の幅を0.01に変更してStartボタンを押した際の画面を図\ref{fig:シミュレータ教材の使用例2}に示す．結果部分から必要な精度を満たすようになったのがわかる．ここから，導関数$\sin(x)$は微小区間の幅が0.01であれば誤差を0.01より小さくすることができることがわかる．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-sample3.png}
\end{center}
\caption{シミュレータ教材の使用例2}
\label{fig:シミュレータ教材の使用例2}
\end{figure}

\clearpage

最後に，微小区間の幅を0.02に変更してStartボタンを押した際の画面を図\ref{fig:シミュレータ教材の使用例3}に示す．結果部分から必要な精度を満たしていないことがわかる．ここから，導関数$\sin(x)$は微小区間の幅が0.02の際は，誤差が0.01を超えることがわかる．そのため，演習問題の回答は0.01となる．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-sample4.png}
\end{center}
\caption{シミュレータ教材の使用例3}
\label{fig:シミュレータ教材の使用例3}
\end{figure}
\clearpage
\section{教材の実装について}
\subsection{開発言語}
\subsubsection{HTML}
HTMLとは，Webの最も基本的な構成要素であり，Webページを作成する際に使用されるマークアップ言語である．また，正式名称はHyper Text Markup Language(ハイパーテキストマークアップランゲージ)である．HTMLの特徴としては，ハイパーテキスト機能でWebページから別のWebページに簡単に遷移することができる点である．
\subsubsection{CSS}
CSSとは，主にHTMLで記述された文書の体裁や見栄えを表現するためのスタイルシート言語である．また，正式名称はCascading Style Sheets(カスケーディングスタイルシート)である．
\subsubsection{JavaScript}
JavaScriptとは，主にWebページで使用されている，Webサイトのコンテンツを動的に変化させたり，サーバと通信してデータを取得したり，Webにおいて重要なプログラミング言語である．
\subsubsection{Chart.js}
Chart.jsとは，JavaScriptアプリケーション開発向けのチャート作成ライブラリの一つである．オプションが豊富で視認性の良いグラフを作成することができる．今回採用した理由として，2013年に作成され，現在もアップデートが行われており，GitHubスター数は約6万，npmダウンロード数は毎週約240万と人気のあるライブラリであると判断したためである．
\clearpage
\subsection{実装機能}
\subsubsection{操作部分}
シミュレータ教材の操作部分を図\ref{fig:操作部分}に示す．導関数の選択は$-2x$，$\sin(x)$及び$\sin(x)\cos(x)-y$の3つのグラフを用意した．微小区間の幅は1から0.0001の範囲で，必要な精度は0.1から0.00001の範囲で入力できるようになっている．Startボタンを押した際に選択されている条件で計算をすることができる．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-sousa.png}
\end{center}
\caption{操作部分}
\label{fig:操作部分}
\end{figure}

\subsubsection{結果部分}
結果部分を図\ref{fig:結果部分}に示す．結果部分はシミュレーションをする範囲の最大と微小区間の幅の商を計算コストとし，それを表示する試行回数，オイラー法によって計算された数値のと理論値の差を誤差とし，誤差の大きい順に5つの$x$の値と誤差の表，操作部分で入力された必要な精度を満たしているかの判定文及び再計算を行なった際に前回の計算の誤差の大きい順に5つの$x$の値と誤差の表を表示した．精度の判定は満たしている際は緑色の文字で，そうでない際は赤色で表示することでわかりやすくしている．ここでは微小区間の幅を変更することによって誤差がどの程度変化したかを数値で確認することができる．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=0.7\textwidth,keepaspectratio]{sim-kekka.png}
\end{center}
\caption{結果部分}
\label{fig:結果部分}
\end{figure}

\clearpage

\subsubsection{グラフ描画部分}
グラフ描画部分を図\ref{fig:グラフ描画部分}に示す．計算が完了するとグラフが描画され，オイラー法は赤色のラインで，理論値は緑色のラインで表現している．理論値のラインを背面にすることによって，誤差が生じている際に，原関数の形を把握しながら誤差を可視化することができる．また，理論値に関して同じ微小区間の幅の際に，オイラー法より高精度な4次ルンゲクッタ法によって計算された数値を利用している．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-gurafu.png}
\end{center}
\caption{グラフ描画部分}
\label{fig:グラフ描画部分}
\end{figure}

\clearpage

\subsubsection{拡大グラフ描画部分}
拡大グラフ描画部分を図\ref{fig:拡大グラフ描画部分}に示す．拡大グラフ描画部分は計算が完了すると，誤差が最大となる$x$を中心として前後の微小区間5つ分を拡大したグラフを描画する．誤差が小さい際に，グラフ描画部分では視認できない誤差を可視化することができる．また，Chart.jsの設定はグラフ描画部分と同じオプションを利用している．

\begin{figure}[h]
\begin{center}
\includegraphics[clip,width=\textwidth,keepaspectratio]{sim-kakudai-gurafu.png}
\end{center}
\caption{拡大グラフ描画部分}
\label{fig:拡大グラフ描画部分}
\end{figure}
\clearpage
\section{評価}
\subsection{目的}
本研究で開発したシミュレータ教材により，学習者の理解向上が見込めるかを確認することを目的とする．
\subsection{方法・結果}
数値計算の担当教員を対象に本教材を使用した演習の一例を提案し，シミュレータ教材を実際に体験していただいた上で質問をし評価をいただいた．質問に対して4段階評価(1:そう思わない，2:あまりそう思わない，3:ややそう思う，4:そう思う)で回答で回答していただき，それを評価とする．質問の内容と評価を表\ref{tb:質問内容と評価}に示す．

\begin{table}[htbp]
\centering
\caption{質問内容と評価}
\resizebox{\textwidth}{!}{%
\begin{tabular}{|l|c|} \hline
内容 & 評価 \\ \hline
本教材により数値解法により誤差が生じることを理解できるか & ?  \\ \hline
本教材により微小区間の幅を変更することで精度が変化することが理解できるか & ? \\ \hline
本教材により微小区間の幅を変更することで計算コストが変化することが理解できるか & ? \\ \hline
本教材により必要な精度を満たすような微小区間の幅を自らが設定するものだと理解することができるか & ? \\ \hline
\end{tabular}%
}
\label{tb:質問内容と評価}
\end{table}


\clearpage
\section{結言}
理工学系の教育現場では，不可視現象を取り扱うことがあり，座学のみでは高い学習効果を得ることは難しい．そのため，不可視現象を電子端末上で再現する教材であるシミュレータ教材を用いた体験的な学習が有効的である\cite{suda2018}．

一方，工学において近似解を求めることは重要であり，その手法の1つに常微分方程式がある．常微分方程式は，与えられた導関数を微小区間に分けて積分することで原関数のグラフを導く手法である．実際のシミュレーションでは，その分野や題材ごとに必要な精度が決まっており，その条件を満たすように微小区間の幅を設定する．しかし，教育現場では微小区間の幅が既に設定されている状態で精度を比較することが多い．そのため，微小区間の幅は自らが設定するものだと理解することは難しく，躓きやすいという問題がある．

そこで本研究では，微小区間の幅を設定する過程を体験することで，アルゴリズムや精度への影響についての比較が可能なシミュレータ教材の開発をした．また，シミュレータ教材だけでは利用者に教材の狙いや，操作方法が伝わりにくいため，本教材を使用した例を作成した．開発した教材を使用した例を基に評価を行った結果，本教材によりアルゴリズムや精度への影響について理解度の向上が見込めるという結果になった．今後，本教材が学習者の理解向上に寄与することを望む．
\clearpage

\begin{thebibliography}{99}
\bibitem{suda2018} 須田宇宙, 三井田惇郎, ``シミュレータを中心としたマルチメディア教材の構成とその効果'', メディア教育研究, Vol.2, No.2, pp.59-68, 2006
\end{thebibliography}
\end{document}